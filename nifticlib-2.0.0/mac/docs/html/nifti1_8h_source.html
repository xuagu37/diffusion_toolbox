<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nifti1_io: /Users/xuagu37/Dropbox/nifticlib-2.0.0/niftilib/nifti1.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nifti1_io
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_18a166b8acd136dd97aa913bc0c577ae.html">niftilib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">nifti1.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="nifti1_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#ifndef _NIFTI_HEADER_</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#define _NIFTI_HEADER_</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">      ** This file defines the &quot;NIFTI-1&quot; header format.               **</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">      ** It is derived from 2 meetings at the NIH (31 Mar 2003 and    **</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">      ** 02 Sep 2003) of the Data Format Working Group (DFWG),        **</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">      ** chartered by the NIfTI (Neuroimaging Informatics Technology  **</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">      ** Initiative) at the National Institutes of Health (NIH).      **</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">      **--------------------------------------------------------------**</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">      ** Neither the National Institutes of Health (NIH), the DFWG,   **</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">      ** nor any of the members or employees of these institutions    **</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">      ** imply any warranty of usefulness of this material for any    **</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">      ** purpose, and do not assume any liability for damages,        **</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">      ** incidental or otherwise, caused by any use of this document. **</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">      ** If these conditions are not acceptable, do not use this!     **</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">      **--------------------------------------------------------------**</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">      ** Author:   Robert W Cox (NIMH, Bethesda)                      **</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">      ** Advisors: John Ashburner (FIL, London),                      **</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">      **           Stephen Smith (FMRIB, Oxford),                     **</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">      **           Mark Jenkinson (FMRIB, Oxford)                     **</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">******************************************************************************/</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/* Note that the ANALYZE 7.5 file header (dbh.h) is</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">         (c) Copyright 1986-1995</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">         Biomedical Imaging Resource</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">         Mayo Foundation</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">   Incorporation of components of dbh.h are by permission of the</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">   Mayo Foundation.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">   Changes from the ANALYZE 7.5 file header in this file are released to the</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">   public domain, including the functional comments and any amusing asides.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/* HEADER STRUCT DECLARATION:</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">   -------------------------</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">   In the comments below for each field, only NIFTI-1 specific requirements</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">   or changes from the ANALYZE 7.5 format are described.  For convenience,</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">   the 348 byte header is described as a single struct, rather than as the</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">   ANALYZE 7.5 group of 3 substructs.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">   Further comments about the interpretation of various elements of this</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">   header are after the data type definition itself.  Fields that are</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">   marked as ++UNUSED++ have no particular interpretation in this standard.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">   (Also see the UNUSED FIELDS comment section, far below.)</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">   The presumption below is that the various C types have particular sizes:</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">     sizeof(int) = sizeof(float) = 4 ;  sizeof(short) = 2</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/*=================*/</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#ifdef  __cplusplus</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/*=================*/</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="comment">/*************************/</span>  <span class="comment">/************************/</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structnifti__1__header.html">  144</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnifti__1__header.html">nifti_1_header</a> { <span class="comment">/* NIFTI-1 usage         */</span>  <span class="comment">/* ANALYZE 7.5 field(s) */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                        <span class="comment">/*************************/</span>  <span class="comment">/************************/</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                           <span class="comment">/*--- was header_key substruct ---*/</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">  148</a></span>&#160; <span class="keywordtype">int</span>   <a class="code" href="structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">sizeof_hdr</a>;      <span class="comment">/* int sizeof_hdr;      */</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a4442d6183e4dce5af7e71365d3eed1ec">  149</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a4442d6183e4dce5af7e71365d3eed1ec">data_type</a>[10];   <span class="comment">/* char data_type[10];  */</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a0e0cf033d74cfae329b4ce0d1b7ece8e">  150</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a0e0cf033d74cfae329b4ce0d1b7ece8e">db_name</a>[18];     <span class="comment">/* char db_name[18];    */</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">  151</a></span>&#160; <span class="keywordtype">int</span>   <a class="code" href="structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">extents</a>;         <span class="comment">/* int extents;         */</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">  152</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">session_error</a>;   <span class="comment">/* short session_error; */</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">  153</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">regular</a>;         <span class="comment">/* char regular;        */</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">  154</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">dim_info</a>;        <span class="comment">/* char hkey_un0;       */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                      <span class="comment">/*--- was image_dimension substruct ---*/</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#abd0c6bb6b71a2a6d10fbcb516af52b13">  157</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#abd0c6bb6b71a2a6d10fbcb516af52b13">dim</a>[8];          <span class="comment">/* short dim[8];        */</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">  158</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">intent_p1</a> ;      <span class="comment">/* short unused8;       */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                                     <span class="comment">/* short unused9;       */</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">  160</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">intent_p2</a> ;      <span class="comment">/* short unused10;      */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                                     <span class="comment">/* short unused11;      */</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">  162</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">intent_p3</a> ;      <span class="comment">/* short unused12;      */</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                                     <span class="comment">/* short unused13;      */</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">  164</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">intent_code</a> ;    <span class="comment">/* short unused14;      */</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">  165</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">datatype</a>;        <span class="comment">/* short datatype;      */</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">  166</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">bitpix</a>;          <span class="comment">/* short bitpix;        */</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#adc0e937b2b556da163772b20da729778">  167</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#adc0e937b2b556da163772b20da729778">slice_start</a>;     <span class="comment">/* short dim_un0;       */</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#af3b966e2936cc174b43fedadbbd933dc">  168</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#af3b966e2936cc174b43fedadbbd933dc">pixdim</a>[8];       <span class="comment">/* float pixdim[8];     */</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">  169</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">vox_offset</a>;      <span class="comment">/* float vox_offset;    */</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">  170</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">scl_slope</a> ;      <span class="comment">/* float funused1;      */</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">  171</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">scl_inter</a> ;      <span class="comment">/* float funused2;      */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">  172</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">slice_end</a>;       <span class="comment">/* float funused3;      */</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">  173</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">slice_code</a> ;   </div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a6b95dab630916801b716f52513305e93">  174</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a6b95dab630916801b716f52513305e93">xyzt_units</a> ;   </div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#af415db2201f47d61354766245c3f2520">  175</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#af415db2201f47d61354766245c3f2520">cal_max</a>;         <span class="comment">/* float cal_max;       */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">  176</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">cal_min</a>;         <span class="comment">/* float cal_min;       */</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a70400549d1f42d7f777915273576549b">  177</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a70400549d1f42d7f777915273576549b">slice_duration</a>;  <span class="comment">/* float compressed;    */</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">  178</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">toffset</a>;         <span class="comment">/* float verified;      */</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">  179</a></span>&#160; <span class="keywordtype">int</span>   <a class="code" href="structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">glmax</a>;           <span class="comment">/* int glmax;           */</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">  180</a></span>&#160; <span class="keywordtype">int</span>   <a class="code" href="structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">glmin</a>;           <span class="comment">/* int glmin;           */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                         <span class="comment">/*--- was data_history substruct ---*/</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a8725b5f9e0ef6882200bfeb89b11eb3a">  183</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a8725b5f9e0ef6882200bfeb89b11eb3a">descrip</a>[80];     <span class="comment">/* char descrip[80];    */</span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a93e288bd39c44188304677f6bdc96a6b">  184</a></span>&#160; <span class="keywordtype">char</span>  <a class="code" href="structnifti__1__header.html#a93e288bd39c44188304677f6bdc96a6b">aux_file</a>[24];    <span class="comment">/* char aux_file[24];   */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">  186</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">qform_code</a> ;     <span class="comment">/*-- all ANALYZE 7.5 ---*/</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">  187</a></span>&#160; <span class="keywordtype">short</span> <a class="code" href="structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">sform_code</a> ;     <span class="comment">/*   fields below here  */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                     <span class="comment">/*   are replaced       */</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">  189</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">quatern_b</a> ;    </div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">  190</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">quatern_c</a> ;    </div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">  191</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">quatern_d</a> ;    </div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">  192</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">qoffset_x</a> ;    </div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">  193</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">qoffset_y</a> ;    </div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">  194</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">qoffset_z</a> ;    </div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#ad88e17b7ec9a5e198bf13d82e167e643">  196</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#ad88e17b7ec9a5e198bf13d82e167e643">srow_x</a>[4] ;    </div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a07b0ec3e66e4dd72db3f0910cfab4c46">  197</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#a07b0ec3e66e4dd72db3f0910cfab4c46">srow_y</a>[4] ;    </div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#aea26ff366fcf2fdde19efd4e4f5b9d98">  198</a></span>&#160; <span class="keywordtype">float</span> <a class="code" href="structnifti__1__header.html#aea26ff366fcf2fdde19efd4e4f5b9d98">srow_z</a>[4] ;    </div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#ae3d911b886703c6f0976e308d83a3495">  200</a></span>&#160; <span class="keywordtype">char</span> <a class="code" href="structnifti__1__header.html#ae3d911b886703c6f0976e308d83a3495">intent_name</a>[16];</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="structnifti__1__header.html#a5c7eff0d659a6a1f69f576d40cf4d3ed">  202</a></span>&#160; <span class="keywordtype">char</span> <a class="code" href="structnifti__1__header.html#a5c7eff0d659a6a1f69f576d40cf4d3ed">magic</a>[4] ;      </div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;} ;                   <span class="comment">/**** 348 bytes total ****/</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structnifti__1__header.html">nifti_1_header</a> <a class="code" href="structnifti__1__header.html">nifti_1_header</a> ;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/* HEADER EXTENSIONS:</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">   -----------------</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">   After the end of the 348 byte header (e.g., after the magic field),</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   the next 4 bytes are a char array field named &quot;extension&quot;. By default,</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">   all 4 bytes of this array should be set to zero. In a .nii file, these</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">   4 bytes will always be present, since the earliest start point for</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">   the image data is byte #352. In a separate .hdr file, these bytes may</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">   or may not be present. If not present (i.e., if the length of the .hdr</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">   file is 348 bytes), then a NIfTI-1 compliant program should use the</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">   default value of extension={0,0,0,0}. The first byte (extension[0])</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">   is the only value of this array that is specified at present. The other</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">   3 bytes are reserved for future use.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">   If extension[0] is nonzero, it indicates that extended header information</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">   is present in the bytes following the extension array. In a .nii file,</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">   this extended header data is before the image data (and vox_offset</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">   must be set correctly to allow for this). In a .hdr file, this extended</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">   data follows extension and proceeds (potentially) to the end of the file.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">   The format of extended header data is weakly specified. Each extension</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">   must be an integer multiple of 16 bytes long. The first 8 bytes of each</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">   extension comprise 2 integers:</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">      int esize , ecode ;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">   These values may need to be byte-swapped, as indicated by dim[0] for</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">   the rest of the header.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">     * esize is the number of bytes that form the extended header data</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">       + esize must be a positive integral multiple of 16</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">       + this length includes the 8 bytes of esize and ecode themselves</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     * ecode is a non-negative integer that indicates the format of the</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">       extended header data that follows</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">       + different ecode values are assigned to different developer groups</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">       + at present, the &quot;registered&quot; values for code are</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">         = 0 = unknown private format (not recommended!)</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">         = 2 = DICOM format (i.e., attribute tags and values)</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">         = 4 = AFNI group (i.e., ASCII XML-ish elements)</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">   In the interests of interoperability (a primary rationale for NIfTI),</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">   groups developing software that uses this extension mechanism are</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">   encouraged to document and publicize the format of their extensions.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">   To this end, the NIfTI DFWG will assign even numbered codes upon request</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">   to groups submitting at least rudimentary documentation for the format</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">   of their extension; at present, the contact is mailto:rwcox@nih.gov.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">   The assigned codes and documentation will be posted on the NIfTI</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">   website. All odd values of ecode (and 0) will remain unassigned;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">   at least, until the even ones are used up, when we get to 2,147,483,646.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">   Note that the other contents of the extended header data section are</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">   totally unspecified by the NIfTI-1 standard. In particular, if binary</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">   data is stored in such a section, its byte order is not necessarily</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">   the same as that given by examining dim[0]; it is incumbent on the</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">   programs dealing with such data to determine the byte order of binary</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">   extended header data.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">   Multiple extended header sections are allowed, each starting with an</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">   esize,ecode value pair. The first esize value, as described above,</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">   is at bytes #352-355 in the .hdr or .nii file (files start at byte #0).</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">   If this value is positive, then the second (esize2) will be found</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   starting at byte #352+esize1 , the third (esize3) at byte #352+esize1+esize2,</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   et cetera.  Of course, in a .nii file, the value of vox_offset must</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">   be compatible with these extensions. If a malformed file indicates</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">   that an extended header data section would run past vox_offset, then</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">   the entire extended header section should be ignored. In a .hdr file,</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">   if an extended header data section would run past the end-of-file,</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">   that extended header data should also be ignored.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">   With the above scheme, a program can successively examine the esize</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">   and ecode values, and skip over each extended header section if the</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">   program doesn&#39;t know how to interpret the data within. Of course, any</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">   program can simply ignore all extended header sections simply by jumping</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">   straight to the image data using vox_offset.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   </div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structnifti1__extender.html">  287</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnifti1__extender.html">nifti1_extender</a> { <span class="keywordtype">char</span> extension[4] ; } ;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structnifti1__extender.html">nifti1_extender</a> nifti1_extender ;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="structnifti1__extension.html">  293</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnifti1__extension.html">nifti1_extension</a> {</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">  294</a></span>&#160;   <span class="keywordtype">int</span>    <a class="code" href="structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">esize</a> ; </div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="structnifti1__extension.html#ab2fd473ee53f5e91706e8a9f03be7ad7">  295</a></span>&#160;   <span class="keywordtype">int</span>    <a class="code" href="structnifti1__extension.html#ab2fd473ee53f5e91706e8a9f03be7ad7">ecode</a> ; </div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="structnifti1__extension.html#a598c33c1b45d45c22645d40762803ceb">  296</a></span>&#160;   <span class="keywordtype">char</span> * <a class="code" href="structnifti1__extension.html#a598c33c1b45d45c22645d40762803ceb">edata</a> ; </div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;} ;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structnifti1__extension.html">nifti1_extension</a> <a class="code" href="structnifti1__extension.html">nifti1_extension</a> ;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/* DATA DIMENSIONALITY (as in ANALYZE 7.5):</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">   ---------------------------------------</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">     dim[0] = number of dimensions;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">              - if dim[0] is outside range 1..7, then the header information</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">                needs to be byte swapped appropriately</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">              - ANALYZE supports dim[0] up to 7, but NIFTI-1 reserves</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">                dimensions 1,2,3 for space (x,y,z), 4 for time (t), and</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">                5,6,7 for anything else needed.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">     dim[i] = length of dimension #i, for i=1..dim[0]  (must be positive)</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">              - also see the discussion of intent_code, far below</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">     pixdim[i] = voxel width along dimension #i, i=1..dim[0] (positive)</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">                 - cf. ORIENTATION section below for use of pixdim[0]</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">                 - the units of pixdim can be specified with the xyzt_units</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">                   field (also described far below).</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">   Number of bits per voxel value is in bitpix, which MUST correspond with</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">   the datatype field.  The total number of bytes in the image data is</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">     dim[1] * ... * dim[dim[0]] * bitpix / 8</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">   In NIFTI-1 files, dimensions 1,2,3 are for space, dimension 4 is for time,</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">   and dimension 5 is for storing multiple values at each spatiotemporal</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">   voxel.  Some examples:</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">     - A typical whole-brain FMRI experiment&#39;s time series:</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">        - dim[0] = 4</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">        - dim[1] = 64   pixdim[1] = 3.75 xyzt_units =  NIFTI_UNITS_MM</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">        - dim[2] = 64   pixdim[2] = 3.75             | NIFTI_UNITS_SEC</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">        - dim[3] = 20   pixdim[3] = 5.0</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">        - dim[4] = 120  pixdim[4] = 2.0</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">     - A typical T1-weighted anatomical volume:</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">        - dim[0] = 3</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">        - dim[1] = 256  pixdim[1] = 1.0  xyzt_units = NIFTI_UNITS_MM</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">        - dim[2] = 256  pixdim[2] = 1.0</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">        - dim[3] = 128  pixdim[3] = 1.1</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">     - A single slice EPI time series:</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">        - dim[0] = 4</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">        - dim[1] = 64   pixdim[1] = 3.75 xyzt_units =  NIFTI_UNITS_MM</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">        - dim[2] = 64   pixdim[2] = 3.75             | NIFTI_UNITS_SEC</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">        - dim[3] = 1    pixdim[3] = 5.0</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">        - dim[4] = 1200 pixdim[4] = 0.2</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">     - A 3-vector stored at each point in a 3D volume:</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">        - dim[0] = 5</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">        - dim[1] = 256  pixdim[1] = 1.0  xyzt_units = NIFTI_UNITS_MM</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">        - dim[2] = 256  pixdim[2] = 1.0</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">        - dim[3] = 128  pixdim[3] = 1.1</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">        - dim[4] = 1    pixdim[4] = 0.0</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">        - dim[5] = 3                     intent_code = NIFTI_INTENT_VECTOR</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">     - A single time series with a 3x3 matrix at each point:</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">        - dim[0] = 5</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">        - dim[1] = 1                     xyzt_units = NIFTI_UNITS_SEC</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">        - dim[2] = 1</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">        - dim[3] = 1</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">        - dim[4] = 1200 pixdim[4] = 0.2</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">        - dim[5] = 9                     intent_code = NIFTI_INTENT_GENMATRIX</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">        - intent_p1 = intent_p2 = 3.0    (indicates matrix dimensions)</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/* DATA STORAGE:</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">   ------------</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">   If the magic field is &quot;n+1&quot;, then the voxel data is stored in the</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">   same file as the header.  In this case, the voxel data starts at offset</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">   (int)vox_offset into the header file.  Thus, vox_offset=352.0 means that</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">   the data starts immediately after the NIFTI-1 header.  If vox_offset is</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">   greater than 352, the NIFTI-1 format does not say much about the</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">   contents of the dataset file between the end of the header and the</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">   start of the data.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">   FILES:</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">   -----</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">   If the magic field is &quot;ni1&quot;, then the voxel data is stored in the</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">   associated &quot;.img&quot; file, starting at offset 0 (i.e., vox_offset is not</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">   used in this case, and should be set to 0.0).</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">   When storing NIFTI-1 datasets in pairs of files, it is customary to name</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">   the files in the pattern &quot;name.hdr&quot; and &quot;name.img&quot;, as in ANALYZE 7.5.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">   When storing in a single file (&quot;n+1&quot;), the file name should be in</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">   the form &quot;name.nii&quot; (the &quot;.nft&quot; and &quot;.nif&quot; suffixes are already taken;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">   cf. http://www.icdatamaster.com/n.html ).</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">   BYTE ORDERING:</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">   -------------</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">   The byte order of the data arrays is presumed to be the same as the byte</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">   order of the header (which is determined by examining dim[0]).</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">   Floating point types are presumed to be stored in IEEE-754 format.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/* DETAILS ABOUT vox_offset:</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   ------------------------</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">   In a .nii file, the vox_offset field value is interpreted as the start</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">   location of the image data bytes in that file. In a .hdr/.img file pair,</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">   the vox_offset field value is the start location of the image data</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">   bytes in the .img file.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">    * If vox_offset is less than 352 in a .nii file, it is equivalent</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">      to 352 (i.e., image data never starts before byte #352 in a .nii file).</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">    * The default value for vox_offset in a .nii file is 352.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">    * In a .hdr file, the default value for vox_offset is 0.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">    * vox_offset should be an integer multiple of 16; otherwise, some</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">      programs may not work properly (e.g., SPM). This is to allow</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">      memory-mapped input to be properly byte-aligned.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">   Note that since vox_offset is an IEEE-754 32 bit float (for compatibility</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">   with the ANALYZE-7.5 format), it effectively has a 24 bit mantissa. All</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">   integers from 0 to 2^24 can be represented exactly in this format, but not</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">   all larger integers are exactly storable as IEEE-754 32 bit floats. However,</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">   unless you plan to have vox_offset be potentially larger than 16 MB, this</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">   should not be an issue. (Actually, any integral multiple of 16 up to 2^27</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">   can be represented exactly in this format, which allows for up to 128 MB</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">   of random information before the image data.  If that isn&#39;t enough, then</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">   perhaps this format isn&#39;t right for you.)</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">   In a .img file (i.e., image data stored separately from the NIfTI-1</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">   header), data bytes between #0 and #vox_offset-1 (inclusive) are completely</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">   undefined and unregulated by the NIfTI-1 standard. One potential use of</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">   having vox_offset &gt; 0 in the .hdr/.img file pair storage method is to make</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">   the .img file be a copy of (or link to) a pre-existing image file in some</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">   other format, such as DICOM; then vox_offset would be set to the offset of</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">   the image data in this file. (It may not be possible to follow the</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">   &quot;multiple-of-16 rule&quot; with an arbitrary external file; using the NIfTI-1</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">   format in such a case may lead to a file that is incompatible with software</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">   that relies on vox_offset being a multiple of 16.)</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">   In a .nii file, data bytes between #348 and #vox_offset-1 (inclusive) may</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">   be used to store user-defined extra information; similarly, in a .hdr file,</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">   any data bytes after byte #347 are available for user-defined extra</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">   information. The (very weak) regulation of this extra header data is</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">   described elsewhere.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/* DATA SCALING:</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">   ------------</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">   If the scl_slope field is nonzero, then each voxel value in the dataset</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">   should be scaled as</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">      y = scl_slope * x + scl_inter</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">   where x = voxel value stored</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">         y = &quot;true&quot; voxel value</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">   Normally, we would expect this scaling to be used to store &quot;true&quot; floating</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">   values in a smaller integer datatype, but that is not required.  That is,</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">   it is legal to use scaling even if the datatype is a float type (crazy,</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">   perhaps, but legal).</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">    - However, the scaling is to be ignored if datatype is DT_RGB24.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">    - If datatype is a complex type, then the scaling is to be</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">      applied to both the real and imaginary parts.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">   The cal_min and cal_max fields (if nonzero) are used for mapping (possibly</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">   scaled) dataset values to display colors:</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">    - Minimum display intensity (black) corresponds to dataset value cal_min.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    - Maximum display intensity (white) corresponds to dataset value cal_max.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">    - Dataset values below cal_min should display as black also, and values</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">      above cal_max as white.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">    - Colors &quot;black&quot; and &quot;white&quot;, of course, may refer to any scalar display</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">      scheme (e.g., a color lookup table specified via aux_file).</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">    - cal_min and cal_max only make sense when applied to scalar-valued</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">      datasets (i.e., dim[0] &lt; 5 or dim[5] = 1).</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/* TYPE OF DATA (acceptable values for datatype field):</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">   ---------------------------------------------------</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">   Values of datatype smaller than 256 are ANALYZE 7.5 compatible.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">   Larger values are NIFTI-1 additions.  These are all multiples of 256, so</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">   that no bits below position 8 are set in datatype.  But there is no need</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">   to use only powers-of-2, as the original ANALYZE 7.5 datatype codes do.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">   The additional codes are intended to include a complete list of basic</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">   scalar types, including signed and unsigned integers from 8 to 64 bits,</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">   floats from 32 to 128 bits, and complex (float pairs) from 64 to 256 bits.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">   Note that most programs will support only a few of these datatypes!</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">   A NIFTI-1 program should fail gracefully (e.g., print a warning message)</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">   when it encounters a dataset with a type it doesn&#39;t like.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="preprocessor">#undef DT_UNKNOWN  </span><span class="comment">/* defined in dirent.h on some Unix systems */</span><span class="preprocessor"></span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            <span class="comment">/*--- the original ANALYZE 7.5 type codes ---*/</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">#define DT_NONE                    0</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">#define DT_UNKNOWN                 0     </span><span class="comment">/* what it says, dude           */</span><span class="preprocessor"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">#define DT_BINARY                  1     </span><span class="comment">/* binary (1 bit/voxel)         */</span><span class="preprocessor"></span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#define DT_UNSIGNED_CHAR           2     </span><span class="comment">/* unsigned char (8 bits/voxel) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">#define DT_SIGNED_SHORT            4     </span><span class="comment">/* signed short (16 bits/voxel) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="preprocessor">#define DT_SIGNED_INT              8     </span><span class="comment">/* signed int (32 bits/voxel)   */</span><span class="preprocessor"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#define DT_FLOAT                  16     </span><span class="comment">/* float (32 bits/voxel)        */</span><span class="preprocessor"></span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">#define DT_COMPLEX                32     </span><span class="comment">/* complex (64 bits/voxel)      */</span><span class="preprocessor"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#define DT_DOUBLE                 64     </span><span class="comment">/* double (64 bits/voxel)       */</span><span class="preprocessor"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="preprocessor">#define DT_RGB                   128     </span><span class="comment">/* RGB triple (24 bits/voxel)   */</span><span class="preprocessor"></span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">#define DT_ALL                   255     </span><span class="comment">/* not very useful (?)          */</span><span class="preprocessor"></span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                            <span class="comment">/*----- another set of names for the same ---*/</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">#define DT_UINT8                   2</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor">#define DT_INT16                   4</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#define DT_INT32                   8</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">#define DT_FLOAT32                16</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">#define DT_COMPLEX64              32</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">#define DT_FLOAT64                64</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">#define DT_RGB24                 128</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            <span class="comment">/*------------------- new codes for NIFTI ---*/</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">#define DT_INT8                  256     </span><span class="comment">/* signed char (8 bits)         */</span><span class="preprocessor"></span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#define DT_UINT16                512     </span><span class="comment">/* unsigned short (16 bits)     */</span><span class="preprocessor"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#define DT_UINT32                768     </span><span class="comment">/* unsigned int (32 bits)       */</span><span class="preprocessor"></span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#define DT_INT64                1024     </span><span class="comment">/* long long (64 bits)          */</span><span class="preprocessor"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">#define DT_UINT64               1280     </span><span class="comment">/* unsigned long long (64 bits) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#define DT_FLOAT128             1536     </span><span class="comment">/* long double (128 bits)       */</span><span class="preprocessor"></span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#define DT_COMPLEX128           1792     </span><span class="comment">/* double pair (128 bits)       */</span><span class="preprocessor"></span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#define DT_COMPLEX256           2048     </span><span class="comment">/* long double pair (256 bits)  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">#define DT_RGBA32               2304     </span><span class="comment">/* 4 byte RGBA (32 bits/voxel)  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                            <span class="comment">/*------- aliases for all the above codes ---*/</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga1ef0dc17948c65b6a7311fe96ddfc441">  525</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_UINT8           2</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga746b4eba0eaaac6366b232b46f590f48">  527</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_INT16           4</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga9bf4e01d93f73a1eaf8966f387e65999">  529</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_INT32           8</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga8220ccec425b9387abf3d2b71ac0be7e">  531</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_FLOAT32        16</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga9ae010c2ff48380fcb611c06048956c5">  533</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_COMPLEX64      32</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga1253a2540a68b4dd7a5d78bc8c4c2a4d">  535</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_FLOAT64        64</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#gabad329a29f5f3b65c1e4de114d7bb06b">  537</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_RGB24         128</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga7ed8fda7096e3ff6d4051cd73d708688">  539</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_INT8          256</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga253e4b750f2aa75a3efdac232663b85c">  541</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_UINT16        512</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga75125d71779526934b59d4d402b5fe10">  543</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_UINT32        768</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga68fa86838cb29705b5a8ffc9ac158419">  545</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_INT64        1024</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#gab8a45494d65119cdd94df359ee18b94b">  547</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_UINT64       1280</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga33274f22307e976a90c24917467e6c56">  549</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_FLOAT128     1536</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga65e61452b861209be2eb1a5a96556ca9">  551</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_COMPLEX128   1792</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga08c3af37cce4c1dd34703d1fbbdf9129">  553</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_COMPLEX256   2048</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___d_a_t_a_t_y_p_e___a_l_i_a_s_e_s.html#ga6ee4807e271d77790cdc6c0dd3220fcb">  555</a></span>&#160;<span class="preprocessor">#define NIFTI_TYPE_RGBA32       2304</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                     <span class="comment">/*-------- sample typedefs for complicated types ---*/</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">float</span>       r,i;     } complex_float ;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">double</span>      r,i;     } complex_double ;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">long</span> <span class="keywordtype">double</span> r,i;     } complex_longdouble ;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> r,g,b; } rgb_byte ;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">/* INTERPRETATION OF VOXEL DATA:</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">   ----------------------------</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">   The intent_code field can be used to indicate that the voxel data has</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">   some particular meaning.  In particular, a large number of codes is</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">   given to indicate that the the voxel data should be interpreted as</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">   being drawn from a given probability distribution.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">   VECTOR-VALUED DATASETS:</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">   ----------------------</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">   The 5th dimension of the dataset, if present (i.e., dim[0]=5 and</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">   dim[5] &gt; 1), contains multiple values (e.g., a vector) to be stored</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">   at each spatiotemporal location.  For example, the header values</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">    - dim[0] = 5</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">    - dim[1] = 64</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    - dim[2] = 64</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">    - dim[3] = 20</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">    - dim[4] = 1     (indicates no time axis)</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">    - dim[5] = 3</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">    - datatype = DT_FLOAT</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_VECTOR</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">   mean that this dataset should be interpreted as a 3D volume (64x64x20),</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">   with a 3-vector of floats defined at each point in the 3D grid.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">   A program reading a dataset with a 5th dimension may want to reformat</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">   the image data to store each voxels&#39; set of values together in a struct</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">   or array.  This programming detail, however, is beyond the scope of the</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">   NIFTI-1 file specification!  Uses of dimensions 6 and 7 are also not</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">   specified here.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">   STATISTICAL PARAMETRIC DATASETS (i.e., SPMs):</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">   --------------------------------------------</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">   Values of intent_code from NIFTI_FIRST_STATCODE to NIFTI_LAST_STATCODE</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">   (inclusive) indicate that the numbers in the dataset should be interpreted</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">   as being drawn from a given distribution.  Most such distributions have</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">   auxiliary parameters (e.g., NIFTI_INTENT_TTEST has 1 DOF parameter).</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">   If the dataset DOES NOT have a 5th dimension, then the auxiliary parameters</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">   are the same for each voxel, and are given in header fields intent_p1,</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">   intent_p2, and intent_p3.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">   If the dataset DOES have a 5th dimension, then the auxiliary parameters</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">   are different for each voxel.  For example, the header values</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">    - dim[0] = 5</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">    - dim[1] = 128</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">    - dim[2] = 128</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">    - dim[3] = 1      (indicates a single slice)</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">    - dim[4] = 1      (indicates no time axis)</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">    - dim[5] = 2</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">    - datatype = DT_FLOAT</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_TTEST</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">   mean that this is a 2D dataset (128x128) of t-statistics, with the</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">   t-statistic being in the first &quot;plane&quot; of data and the degrees-of-freedom</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">   parameter being in the second &quot;plane&quot; of data.</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">   If the dataset 5th dimension is used to store the voxel-wise statistical</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">   parameters, then dim[5] must be 1 plus the number of parameters required</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">   by that distribution (e.g., intent_code=NIFTI_INTENT_TTEST implies dim[5]</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">   must be 2, as in the example just above).</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">   Note: intent_code values 2..10 are compatible with AFNI 1.5x (which is</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">   why there is no code with value=1, which is obsolescent in AFNI).</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">   OTHER INTENTIONS:</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">   ----------------</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">   The purpose of the intent_* fields is to help interpret the values</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">   stored in the dataset.  Some non-statistical values for intent_code</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">   and conventions are provided for storing other complex data types.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">   The intent_name field provides space for a 15 character (plus 0 byte)</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">   &#39;name&#39; string for the type of data stored. Examples:</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_ESTIMATE; intent_name = &quot;T1&quot;;</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">       could be used to signify that the voxel values are estimates of the</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">       NMR parameter T1.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_TTEST; intent_name = &quot;House&quot;;</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">       could be used to signify that the voxel values are t-statistics</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">       for the significance of &#39;activation&#39; response to a House stimulus.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_DISPVECT; intent_name = &quot;ToMNI152&quot;;</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">       could be used to signify that the voxel values are a displacement</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">       vector that transforms each voxel (x,y,z) location to the</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">       corresponding location in the MNI152 standard brain.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">    - intent_code = NIFTI_INTENT_SYMMATRIX; intent_name = &quot;DTI&quot;;</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">       could be used to signify that the voxel values comprise a diffusion</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">       tensor image.</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">   If no data name is implied or needed, intent_name[0] should be set to 0.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="nifti1_8h.html#acf25def6deaff31270b422f1c56c1b35">  656</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_NONE        0</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">/*-------- These codes are for probability distributions ---------------*/</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">/* Most distributions have a number of parameters,</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">       below denoted by p1, p2, and p3, and stored in</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">        - intent_p1, intent_p2, intent_p3 if dataset doesn&#39;t have 5th dimension</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">        - image data array                if dataset does have 5th dimension</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">       Functions to compute with many of the distributions below can be found</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">       in the CDF library from U Texas.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">       Formulas for and discussions of these distributions can be found in the</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">       following books:</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">        [U] Univariate Discrete Distributions,</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">            NL Johnson, S Kotz, AW Kemp.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">        [C1] Continuous Univariate Distributions, vol. 1,</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">             NL Johnson, S Kotz, N Balakrishnan.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">        [C2] Continuous Univariate Distributions, vol. 2,</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">             NL Johnson, S Kotz, N Balakrishnan.                            */</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">/*----------------------------------------------------------------------*/</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="preprocessor">#define NIFTI_INTENT_CORREL      2</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga84ab612e611c71c52848c7aea27581fd">  692</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_TTEST       3</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gab744c9d5e8891ef4d73913454a80d4cd">  697</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_FTEST       4</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gae7c23a0c9b8d1819054b1b3e81da70a1">  701</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_ZSCORE      5</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga982823fd732a1c5c145eb762b0b28c77">  706</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_CHISQ       6</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gaf118b42c87a475affe1cb7ff39b2e4bb">  711</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_BETA        7</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga67a03c21e9077ed568b06ee1f2ec75a3">  717</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_BINOM       8</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga4f6b973488f64f3e6fda7ddbcd09d83e">  723</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_GAMMA       9</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga1e8492dbe60e4ce358cd49d4bfd0b3c6">  728</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_POISSON    10</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gae185e35ddb509fdae6802fc6140838fa">  733</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_NORMAL     11</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga808f36bb918469fa2c8f5b1e86e6a322">  739</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_FTEST_NONC 12</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga27bd29bf806c73caf0fe055157d93695">  744</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_CHISQ_NONC 13</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga08101b266ebd17fbb746b10ad7686e95">  750</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_LOGISTIC   14</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga1897f1fd2c7c083e5dbe3056c93742e9">  756</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_LAPLACE    15</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga876d2d65a04c636b69048cdc4acaa697">  760</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_UNIFORM    16</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gaef337ad2c0ea0d698d0d13c92532501c">  765</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_TTEST_NONC 17</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga2c5885d5e6d7a98039455f8358923991">  772</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_WEIBULL    18</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga927bc217e6332cc414736be447c3e8d2">  780</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_CHI        19</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gae40fc7f839a4e3f41387b1d55d6eb5a0">  787</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_INVGAUSS   20</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga29705d289bf7e8847716fdf6ee0bfa7d">  793</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_EXTVAL     21</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga111364b2f83b48a64f2d49d4541d1a4b">  797</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_PVAL       22</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gaab09a5d0db8d2c1a4479638c8c0661ce">  805</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_LOGPVAL    23</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga4d2f0e4f4c62772506b48fea9ec5fdec">  812</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_LOG10PVAL  24</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gaabc78cf5797171dcb13b8095892a6433">  816</a></span>&#160;<span class="preprocessor">#define NIFTI_FIRST_STATCODE     2</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga513536b4a3669cae83a0f0a7acfbc6dd">  820</a></span>&#160;<span class="preprocessor">#define NIFTI_LAST_STATCODE     24</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; <span class="comment">/*---------- these values for intent_code aren&#39;t for statistics ----------*/</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gaef336dc28dadfce293aadda671264a93">  828</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_ESTIMATE  1001</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gace230337cfafd74b741509d3665b5777">  834</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_LABEL     1002</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga25ee86d92c9e62308efaa6ce9aa8cd51">  839</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_NEURONAME 1003</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga8e3cfdd7e1be9fd0bb801fa225435db8">  853</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_GENMATRIX 1004</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gab6cd5413095cde3e72ee216a38f60178">  866</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_SYMMATRIX 1005</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gafbbc9936500b51461f7c8bd4ff96ed43">  875</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_DISPVECT  1006   </span><span class="comment">/* specifically for displacements */</span><span class="preprocessor"></span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#define NIFTI_INTENT_VECTOR    1007   </span><span class="comment">/* for any other type of vector */</span><span class="preprocessor"></span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga124259beb28b9b08b279ec9b5196f90e">  889</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_POINTSET  1008</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gae34eb51c5984233c4d1c30ae5f5d309f">  902</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_TRIANGLE  1009</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga69746985b119af3ca3e576fbf98396fb">  911</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_QUATERNION 1010</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga5014b482ea33b66e7ed2c000282e2260">  916</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_DIMLESS    1011</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; <span class="comment">/*---------- these values apply to GIFTI datasets ----------*/</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga6f9fccc28d5accae59a279aa1830ce91">  922</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_TIME_SERIES  2001</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga5cd8e1c7d0e25958db5de64965a0b499">  927</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_NODE_INDEX   2002</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#ga24a258463206ca3d9f7af242249f993c">  938</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_RGB_VECTOR   2003</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gae5d634acc4f9386eb955a3f967faf961">  949</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_RGBA_VECTOR  2004</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___i_n_t_e_n_t___c_o_d_e_s.html#gad0df641934f6c9b30407ee8db84e47c0">  954</a></span>&#160;<span class="preprocessor">#define NIFTI_INTENT_SHAPE        2005</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/* 3D IMAGE (VOLUME) ORIENTATION AND LOCATION IN SPACE:</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">   ---------------------------------------------------</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">   There are 3 different methods by which continuous coordinates can</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">   attached to voxels.  The discussion below emphasizes 3D volumes, and</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">   the continuous coordinates are referred to as (x,y,z).  The voxel</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">   index coordinates (i.e., the array indexes) are referred to as (i,j,k),</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">   with valid ranges:</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">     i = 0 .. dim[1]-1</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">     j = 0 .. dim[2]-1  (if dim[0] &gt;= 2)</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">     k = 0 .. dim[3]-1  (if dim[0] &gt;= 3)</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">   The (x,y,z) coordinates refer to the CENTER of a voxel.  In methods</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">   2 and 3, the (x,y,z) axes refer to a subject-based coordinate system,</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">   with</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">     +x = Right  +y = Anterior  +z = Superior.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">   This is a right-handed coordinate system.  However, the exact direction</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">   these axes point with respect to the subject depends on qform_code</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">   (Method 2) and sform_code (Method 3).</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">   N.B.: The i index varies most rapidly, j index next, k index slowest.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">    Thus, voxel (i,j,k) is stored starting at location</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">      (i + j*dim[1] + k*dim[1]*dim[2]) * (bitpix/8)</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">    into the dataset array.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">   N.B.: The ANALYZE 7.5 coordinate system is</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">      +x = Left  +y = Anterior  +z = Superior</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">    which is a left-handed coordinate system.  This backwardness is</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">    too difficult to tolerate, so this NIFTI-1 standard specifies the</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">    coordinate order which is most common in functional neuroimaging.</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">   N.B.: The 3 methods below all give the locations of the voxel centers</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">    in the (x,y,z) coordinate system.  In many cases, programs will wish</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">    to display image data on some other grid.  In such a case, the program</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">    will need to convert its desired (x,y,z) values into (i,j,k) values</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">    in order to extract (or interpolate) the image data.  This operation</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">    would be done with the inverse transformation to those described below.</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">   N.B.: Method 2 uses a factor &#39;qfac&#39; which is either -1 or 1; qfac is</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">    stored in the otherwise unused pixdim[0].  If pixdim[0]=0.0 (which</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">    should not occur), we take qfac=1.  Of course, pixdim[0] is only used</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">    when reading a NIFTI-1 header, not when reading an ANALYZE 7.5 header.</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">   N.B.: The units of (x,y,z) can be specified using the xyzt_units field.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">   METHOD 1 (the &quot;old&quot; way, used only when qform_code = 0):</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">   -------------------------------------------------------</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">   The coordinate mapping from (i,j,k) to (x,y,z) is the ANALYZE</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">   7.5 way.  This is a simple scaling relationship:</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">     x = pixdim[1] * i</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">     y = pixdim[2] * j</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">     z = pixdim[3] * k</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">   No particular spatial orientation is attached to these (x,y,z)</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">   coordinates.  (NIFTI-1 does not have the ANALYZE 7.5 orient field,</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">   which is not general and is often not set properly.)  This method</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">   is not recommended, and is present mainly for compatibility with</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">   ANALYZE 7.5 files.</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">   METHOD 2 (used when qform_code &gt; 0, which should be the &quot;normal&quot; case):</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">   ---------------------------------------------------------------------</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">   The (x,y,z) coordinates are given by the pixdim[] scales, a rotation</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">   matrix, and a shift.  This method is intended to represent</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">   &quot;scanner-anatomical&quot; coordinates, which are often embedded in the</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">   image header (e.g., DICOM fields (0020,0032), (0020,0037), (0028,0030),</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">   and (0018,0050)), and represent the nominal orientation and location of</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">   the data.  This method can also be used to represent &quot;aligned&quot;</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">   coordinates, which would typically result from some post-acquisition</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">   alignment of the volume to a standard orientation (e.g., the same</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">   subject on another day, or a rigid rotation to true anatomical</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">   orientation from the tilted position of the subject in the scanner).</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">   The formula for (x,y,z) in terms of header parameters and (i,j,k) is:</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">     [ x ]   [ R11 R12 R13 ] [        pixdim[1] * i ]   [ qoffset_x ]</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">     [ y ] = [ R21 R22 R23 ] [        pixdim[2] * j ] + [ qoffset_y ]</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">     [ z ]   [ R31 R32 R33 ] [ qfac * pixdim[3] * k ]   [ qoffset_z ]</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">   The qoffset_* shifts are in the NIFTI-1 header.  Note that the center</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">   of the (i,j,k)=(0,0,0) voxel (first value in the dataset array) is</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">   just (x,y,z)=(qoffset_x,qoffset_y,qoffset_z).</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">   The rotation matrix R is calculated from the quatern_* parameters.</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">   This calculation is described below.</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">   The scaling factor qfac is either 1 or -1.  The rotation matrix R</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">   defined by the quaternion parameters is &quot;proper&quot; (has determinant 1).</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">   This may not fit the needs of the data; for example, if the image</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">   grid is</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">     i increases from Left-to-Right</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">     j increases from Anterior-to-Posterior</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">     k increases from Inferior-to-Superior</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">   Then (i,j,k) is a left-handed triple.  In this example, if qfac=1,</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">   the R matrix would have to be</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">     [  1   0   0 ]</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">     [  0  -1   0 ]  which is &quot;improper&quot; (determinant = -1).</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">     [  0   0   1 ]</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">   If we set qfac=-1, then the R matrix would be</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">     [  1   0   0 ]</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">     [  0  -1   0 ]  which is proper.</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">     [  0   0  -1 ]</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">   This R matrix is represented by quaternion [a,b,c,d] = [0,1,0,0]</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">   (which encodes a 180 degree rotation about the x-axis).</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">   METHOD 3 (used when sform_code &gt; 0):</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">   -----------------------------------</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">   The (x,y,z) coordinates are given by a general affine transformation</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">   of the (i,j,k) indexes:</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">     x = srow_x[0] * i + srow_x[1] * j + srow_x[2] * k + srow_x[3]</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">     y = srow_y[0] * i + srow_y[1] * j + srow_y[2] * k + srow_y[3]</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">     z = srow_z[0] * i + srow_z[1] * j + srow_z[2] * k + srow_z[3]</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">   The srow_* vectors are in the NIFTI_1 header.  Note that no use is</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">   made of pixdim[] in this method.</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">   WHY 3 METHODS?</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">   --------------</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">   Method 1 is provided only for backwards compatibility.  The intention</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">   is that Method 2 (qform_code &gt; 0) represents the nominal voxel locations</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">   as reported by the scanner, or as rotated to some fiducial orientation and</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">   location.  Method 3, if present (sform_code &gt; 0), is to be used to give</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">   the location of the voxels in some standard space.  The sform_code</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">   indicates which standard space is present.  Both methods 2 and 3 can be</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">   present, and be useful in different contexts (method 2 for displaying the</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">   data on its original grid; method 3 for displaying it on a standard grid).</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">   In this scheme, a dataset would originally be set up so that the</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">   Method 2 coordinates represent what the scanner reported.  Later,</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">   a registration to some standard space can be computed and inserted</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">   in the header.  Image display software can use either transform,</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">   depending on its purposes and needs.</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">   In Method 2, the origin of coordinates would generally be whatever</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">   the scanner origin is; for example, in MRI, (0,0,0) is the center</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">   of the gradient coil.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">   In Method 3, the origin of coordinates would depend on the value</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">   of sform_code; for example, for the Talairach coordinate system,</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">   (0,0,0) corresponds to the Anterior Commissure.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">   QUATERNION REPRESENTATION OF ROTATION MATRIX (METHOD 2)</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">   -------------------------------------------------------</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">   The orientation of the (x,y,z) axes relative to the (i,j,k) axes</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">   in 3D space is specified using a unit quaternion [a,b,c,d], where</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">   a*a+b*b+c*c+d*d=1.  The (b,c,d) values are all that is needed, since</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">   we require that a = sqrt(1.0-(b*b+c*c+d*d)) be nonnegative.  The (b,c,d)</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">   values are stored in the (quatern_b,quatern_c,quatern_d) fields.</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">   The quaternion representation is chosen for its compactness in</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">   representing rotations. The (proper) 3x3 rotation matrix that</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">   corresponds to [a,b,c,d] is</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">         [ a*a+b*b-c*c-d*d   2*b*c-2*a*d       2*b*d+2*a*c     ]</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">     R = [ 2*b*c+2*a*d       a*a+c*c-b*b-d*d   2*c*d-2*a*b     ]</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">         [ 2*b*d-2*a*c       2*c*d+2*a*b       a*a+d*d-c*c-b*b ]</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">         [ R11               R12               R13             ]</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">       = [ R21               R22               R23             ]</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">         [ R31               R32               R33             ]</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">   If (p,q,r) is a unit 3-vector, then rotation of angle h about that</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">   direction is represented by the quaternion</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">     [a,b,c,d] = [cos(h/2), p*sin(h/2), q*sin(h/2), r*sin(h/2)].</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">   Requiring a &gt;= 0 is equivalent to requiring -Pi &lt;= h &lt;= Pi.  (Note that</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">   [-a,-b,-c,-d] represents the same rotation as [a,b,c,d]; there are 2</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">   quaternions that can be used to represent a given rotation matrix R.)</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">   To rotate a 3-vector (x,y,z) using quaternions, we compute the</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">   quaternion product</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">     [0,x&#39;,y&#39;,z&#39;] = [a,b,c,d] * [0,x,y,z] * [a,-b,-c,-d]</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">   which is equivalent to the matrix-vector multiply</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">     [ x&#39; ]     [ x ]</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">     [ y&#39; ] = R [ y ]   (equivalence depends on a*a+b*b+c*c+d*d=1)</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">     [ z&#39; ]     [ z ]</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">   Multiplication of 2 quaternions is defined by the following:</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">     [a,b,c,d] = a*1 + b*I + c*J + d*K</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">     where</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">       I*I = J*J = K*K = -1 (I,J,K are square roots of -1)</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">       I*J =  K    J*K =  I    K*I =  J</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">       J*I = -K    K*J = -I    I*K = -J  (not commutative!)</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">     For example</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">       [a,b,0,0] * [0,0,0,1] = [0,0,-b,a]</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">     since this expands to</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">       (a+b*I)*(K) = (a*K+b*I*K) = (a*K-b*J).</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">   The above formula shows how to go from quaternion (b,c,d) to</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">   rotation matrix and direction cosines.  Conversely, given R,</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">   we can compute the fields for the NIFTI-1 header by</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">     a = 0.5  * sqrt(1+R11+R22+R33)    (not stored)</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">     b = 0.25 * (R32-R23) / a       =&gt; quatern_b</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">     c = 0.25 * (R13-R31) / a       =&gt; quatern_c</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">     d = 0.25 * (R21-R12) / a       =&gt; quatern_d</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">   If a=0 (a 180 degree rotation), alternative formulas are needed.</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">   See the nifti1_io.c function mat44_to_quatern() for an implementation</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">   of the various cases in converting R to [a,b,c,d].</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">   Note that R-transpose (= R-inverse) would lead to the quaternion</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">   [a,-b,-c,-d].</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">   The choice to specify the qoffset_x (etc.) values in the final</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">   coordinate system is partly to make it easy to convert DICOM images to</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">   this format.  The DICOM attribute &quot;Image Position (Patient)&quot; (0020,0032)</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">   stores the (Xd,Yd,Zd) coordinates of the center of the first voxel.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">   Here, (Xd,Yd,Zd) refer to DICOM coordinates, and Xd=-x, Yd=-y, Zd=z,</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">   where (x,y,z) refers to the NIFTI coordinate system discussed above.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">   (i.e., DICOM +Xd is Left, +Yd is Posterior, +Zd is Superior,</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">        whereas +x is Right, +y is Anterior  , +z is Superior. )</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">   Thus, if the (0020,0032) DICOM attribute is extracted into (px,py,pz), then</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">     qoffset_x = -px   qoffset_y = -py   qoffset_z = pz</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">   is a reasonable setting when qform_code=NIFTI_XFORM_SCANNER_ANAT.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">   That is, DICOM&#39;s coordinate system is 180 degrees rotated about the z-axis</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">   from the neuroscience/NIFTI coordinate system.  To transform between DICOM</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">   and NIFTI, you just have to negate the x- and y-coordinates.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">   The DICOM attribute (0020,0037) &quot;Image Orientation (Patient)&quot; gives the</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">   orientation of the x- and y-axes of the image data in terms of 2 3-vectors.</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">   The first vector is a unit vector along the x-axis, and the second is</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">   along the y-axis.  If the (0020,0037) attribute is extracted into the</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">   value (xa,xb,xc,ya,yb,yc), then the first two columns of the R matrix</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">   would be</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">              [ -xa  -ya ]</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">              [ -xb  -yb ]</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">              [  xc   yc ]</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">   The negations are because DICOM&#39;s x- and y-axes are reversed relative</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">   to NIFTI&#39;s.  The third column of the R matrix gives the direction of</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">   displacement (relative to the subject) along the slice-wise direction.</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">   This orientation is not encoded in the DICOM standard in a simple way;</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">   DICOM is mostly concerned with 2D images.  The third column of R will be</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">   either the cross-product of the first 2 columns or its negative.  It is</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">   possible to infer the sign of the 3rd column by examining the coordinates</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">   in DICOM attribute (0020,0032) &quot;Image Position (Patient)&quot; for successive</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">   slices.  However, this method occasionally fails for reasons that I</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">   (RW Cox) do not understand.</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <span class="comment">/* [qs]form_code value:  */</span>      <span class="comment">/* x,y,z coordinate system refers to:    */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <span class="comment">/*-----------------------*/</span>      <span class="comment">/*---------------------------------------*/</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___x_f_o_r_m___c_o_d_e_s.html#ga07bbf1c2d76a8d8770fc5d76b24647d1"> 1215</a></span>&#160;<span class="preprocessor">#define NIFTI_XFORM_UNKNOWN      0</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___x_f_o_r_m___c_o_d_e_s.html#gaa90a1fd4f431574e7bebc2b0261ec50f"> 1219</a></span>&#160;<span class="preprocessor">#define NIFTI_XFORM_SCANNER_ANAT 1</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___x_f_o_r_m___c_o_d_e_s.html#gae6c1f140dd22d735e396c2fb3b6334c6"> 1224</a></span>&#160;<span class="preprocessor">#define NIFTI_XFORM_ALIGNED_ANAT 2</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___x_f_o_r_m___c_o_d_e_s.html#ga4159e2d4eb86e582c1f4b6c205b53108"> 1229</a></span>&#160;<span class="preprocessor">#define NIFTI_XFORM_TALAIRACH    3</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___x_f_o_r_m___c_o_d_e_s.html#ga80292343978413b03cb8ccc1e55eb121"> 1233</a></span>&#160;<span class="preprocessor">#define NIFTI_XFORM_MNI_152      4</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">/* UNITS OF SPATIAL AND TEMPORAL DIMENSIONS:</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">   ----------------------------------------</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">   The codes below can be used in xyzt_units to indicate the units of pixdim.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">   As noted earlier, dimensions 1,2,3 are for x,y,z; dimension 4 is for</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">   time (t).</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">    - If dim[4]=1 or dim[0] &lt; 4, there is no time axis.</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">    - A single time series (no space) would be specified with</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">      - dim[0] = 4 (for scalar data) or dim[0] = 5 (for vector data)</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">      - dim[1] = dim[2] = dim[3] = 1</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">      - dim[4] = number of time points</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">      - pixdim[4] = time step</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">      - xyzt_units indicates units of pixdim[4]</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">      - dim[5] = number of values stored at each time point</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">   Bits 0..2 of xyzt_units specify the units of pixdim[1..3]</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">    (e.g., spatial units are values 1..7).</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">   Bits 3..5 of xyzt_units specify the units of pixdim[4]</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">    (e.g., temporal units are multiples of 8).</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">   This compression of 2 distinct concepts into 1 byte is due to the</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">   limited space available in the 348 byte ANALYZE 7.5 header.  The</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">   macros XYZT_TO_SPACE and XYZT_TO_TIME can be used to mask off the</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment">   undesired bits from the xyzt_units fields, leaving &quot;pure&quot; space</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment">   and time codes.  Inversely, the macro SPACE_TIME_TO_XYZT can be</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">   used to assemble a space code (0,1,2,...,7) with a time code</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">   (0,8,16,32,...,56) into the combined value for xyzt_units.</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">   Note that codes are provided to indicate the &quot;time&quot; axis units are</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">   actually frequency in Hertz (_HZ), in part-per-million (_PPM)</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">   or in radians-per-second (_RADS).</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">   The toffset field can be used to indicate a nonzero start point for</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">   the time axis.  That is, time point #m is at t=toffset+m*pixdim[4]</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">   for m=0..dim[4]-1.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#gaab4358e3a869324c9bbd4b2d4eb5567a"> 1279</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_UNKNOWN 0</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga58b8564584f3e2cda3bfb9daebdd28d5"> 1283</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_METER   1</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#gae37d3c19fa7561f6ef662bc27a4af5d4"> 1285</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_MM      2</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga9ab584aac820e59dc2373581ee2c237e"> 1287</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_MICRON  3</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#gae1126a70acd21a99d7748c7ee9f877a8"> 1291</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_SEC     8</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga3a890f2c798b2aa7853135e4c9b03113"> 1293</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_MSEC   16</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga17714a9f67cbf27371ee9dda4a046942"> 1295</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_USEC   24</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                               <span class="comment">/*** These units are for spectral data: ***/</span></div><div class="line"><a name="l01299"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga3f82832f715abf1f8afeebe900bd2f19"> 1299</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_HZ     32</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga56bb7231fda9e33cbe20df645c6c0f13"> 1301</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_PPM    40</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="group___n_i_f_t_i1___u_n_i_t_s.html#ga23156c7a00356dd9896d509a0b9a5c93"> 1303</a></span>&#160;<span class="preprocessor">#define NIFTI_UNITS_RADS   48</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">#undef  XYZT_TO_SPACE</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="preprocessor">#undef  XYZT_TO_TIME</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">#define XYZT_TO_SPACE(xyzt)       ( (xyzt) &amp; 0x07 )</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="preprocessor">#define XYZT_TO_TIME(xyzt)        ( (xyzt) &amp; 0x38 )</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="preprocessor">#undef  SPACE_TIME_TO_XYZT</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="preprocessor">#define SPACE_TIME_TO_XYZT(ss,tt) (  (((char)(ss)) &amp; 0x07)   \</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="preprocessor">                                   | (((char)(tt)) &amp; 0x38) )</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">/* MRI-SPECIFIC SPATIAL AND TEMPORAL INFORMATION:</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">   ---------------------------------------------</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">   A few fields are provided to store some extra information</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">   that is sometimes important when storing the image data</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">   from an FMRI time series experiment.  (After processing such</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">   data into statistical images, these fields are not likely</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">   to be useful.)</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">  { freq_dim  } = These fields encode which spatial dimension (1,2, or 3)</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">  { phase_dim } = corresponds to which acquisition dimension for MRI data.</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">  { slice_dim } =</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">    Examples:</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">      Rectangular scan multi-slice EPI:</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">        freq_dim = 1  phase_dim = 2  slice_dim = 3  (or some permutation)</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment">      Spiral scan multi-slice EPI:</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">        freq_dim = phase_dim = 0  slice_dim = 3</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">        since the concepts of frequency- and phase-encoding directions</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">        don&#39;t apply to spiral scan</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">    slice_duration = If this is positive, AND if slice_dim is nonzero,</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">                     indicates the amount of time used to acquire 1 slice.</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">                     slice_duration*dim[slice_dim] can be less than pixdim[4]</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">                     with a clustered acquisition method, for example.</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">    slice_code = If this is nonzero, AND if slice_dim is nonzero, AND</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">                 if slice_duration is positive, indicates the timing</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">                 pattern of the slice acquisition.  The following codes</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">                 are defined:</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">                   NIFTI_SLICE_SEQ_INC  == sequential increasing</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">                   NIFTI_SLICE_SEQ_DEC  == sequential decreasing</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">                   NIFTI_SLICE_ALT_INC  == alternating increasing</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">                   NIFTI_SLICE_ALT_DEC  == alternating decreasing</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">                   NIFTI_SLICE_ALT_INC2 == alternating increasing #2</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">                   NIFTI_SLICE_ALT_DEC2 == alternating decreasing #2</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">  { slice_start } = Indicates the start and end of the slice acquisition</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">  { slice_end   } = pattern, when slice_code is nonzero.  These values</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">                    are present to allow for the possible addition of</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">                    &quot;padded&quot; slices at either end of the volume, which</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">                    don&#39;t fit into the slice timing pattern.  If there</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">                    are no padding slices, then slice_start=0 and</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">                    slice_end=dim[slice_dim]-1 are the correct values.</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">                    For these values to be meaningful, slice_start must</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">                    be non-negative and slice_end must be greater than</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">                    slice_start.  Otherwise, they should be ignored.</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">  The following table indicates the slice timing pattern, relative to</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">  time=0 for the first slice acquired, for some sample cases.  Here,</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">  dim[slice_dim]=7 (there are 7 slices, labeled 0..6), slice_duration=0.1,</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">  and slice_start=1, slice_end=5 (1 padded slice on each end).</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">  slice</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">  index  SEQ_INC SEQ_DEC ALT_INC ALT_DEC ALT_INC2 ALT_DEC2</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">    6  :   n/a     n/a     n/a     n/a    n/a      n/a    n/a = not applicable</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">    5  :   0.4     0.0     0.2     0.0    0.4      0.2    (slice time offset</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">    4  :   0.3     0.1     0.4     0.3    0.1      0.0     doesn&#39;t apply to</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">    3  :   0.2     0.2     0.1     0.1    0.3      0.3     slices outside</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">    2  :   0.1     0.3     0.3     0.4    0.0      0.1     the range</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">    1  :   0.0     0.4     0.0     0.2    0.2      0.4     slice_start ..</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">    0  :   n/a     n/a     n/a     n/a    n/a      n/a     slice_end)</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">  The SEQ slice_codes are sequential ordering (uncommon but not unknown),</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">  either increasing in slice number or decreasing (INC or DEC), as</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">  illustrated above.</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">  The ALT slice codes are alternating ordering.  The &#39;standard&#39; way for</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">  these to operate (without the &#39;2&#39; on the end) is for the slice timing</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">  to start at the edge of the slice_start .. slice_end group (at slice_start</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">  for INC and at slice_end for DEC).  For the &#39;ALT_*2&#39; slice_codes, the</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">  slice timing instead starts at the first slice in from the edge (at</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">  slice_start+1 for INC2 and at slice_end-1 for DEC2).  This latter</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">  acquisition scheme is found on some Siemens scanners.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">  The fields freq_dim, phase_dim, slice_dim are all squished into the single</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">  byte field dim_info (2 bits each, since the values for each field are</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">  limited to the range 0..3).  This unpleasantness is due to lack of space</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">  in the 348 byte allowance.</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">  The macros DIM_INFO_TO_FREQ_DIM, DIM_INFO_TO_PHASE_DIM, and</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">  DIM_INFO_TO_SLICE_DIM can be used to extract these values from the</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">  dim_info byte.</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">  The macro FPS_INTO_DIM_INFO can be used to put these 3 values</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">  into the dim_info byte.</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="preprocessor">#undef  DIM_INFO_TO_FREQ_DIM</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="preprocessor">#undef  DIM_INFO_TO_PHASE_DIM</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="preprocessor">#undef  DIM_INFO_TO_SLICE_DIM</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="preprocessor">#define DIM_INFO_TO_FREQ_DIM(di)   ( ((di)     ) &amp; 0x03 )</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="preprocessor">#define DIM_INFO_TO_PHASE_DIM(di)  ( ((di) &gt;&gt; 2) &amp; 0x03 )</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="preprocessor">#define DIM_INFO_TO_SLICE_DIM(di)  ( ((di) &gt;&gt; 4) &amp; 0x03 )</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="preprocessor">#undef  FPS_INTO_DIM_INFO</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="preprocessor">#define FPS_INTO_DIM_INFO(fd,pd,sd) ( ( ( ((char)(fd)) &amp; 0x03)      ) |  \</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="preprocessor">                                      ( ( ((char)(pd)) &amp; 0x03) &lt;&lt; 2 ) |  \</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="preprocessor">                                      ( ( ((char)(sd)) &amp; 0x03) &lt;&lt; 4 )  )</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_UNKNOWN   0</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_SEQ_INC   1</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_SEQ_DEC   2</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_ALT_INC   3</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_ALT_DEC   4</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_ALT_INC2  5  </span><span class="comment">/* 05 May 2005: RWCox */</span><span class="preprocessor"></span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="preprocessor">#define NIFTI_SLICE_ALT_DEC2  6  </span><span class="comment">/* 05 May 2005: RWCox */</span><span class="preprocessor"></span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">/* @} */</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">/* UNUSED FIELDS:</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">   -------------</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">   Some of the ANALYZE 7.5 fields marked as ++UNUSED++ may need to be set</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">   to particular values for compatibility with other programs.  The issue</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">   of interoperability of ANALYZE 7.5 files is a murky one -- not all</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">   programs require exactly the same set of fields.  (Unobscuring this</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">   murkiness is a principal motivation behind NIFTI-1.)</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">   Some of the fields that may need to be set for other (non-NIFTI aware)</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">   software to be happy are:</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">     extents    dbh.h says this should be 16384</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">     regular    dbh.h says this should be the character &#39;r&#39;</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">     glmin,   } dbh.h says these values should be the min and max voxel</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">      glmax   }  values for the entire dataset</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">   It is best to initialize ALL fields in the NIFTI-1 header to 0</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">   (e.g., with calloc()), then fill in what is needed.</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">/* MISCELLANEOUS C MACROS</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">-----------------------------------------------------------------------------*/</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">/*.................*/</span></div><div class="line"><a name="l01457"></a><span class="lineno"><a class="line" href="nifti1_8h.html#aab4f74084b6e622a911afd7dd637be7d"> 1457</a></span>&#160;<span class="preprocessor">#define NIFTI_VERSION(h)                               \</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor"> ( ( (h).magic[0]==&#39;n&#39; &amp;&amp; (h).magic[3]==&#39;\0&#39;    &amp;&amp;     \</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">     ( (h).magic[1]==&#39;i&#39; || (h).magic[1]==&#39;+&#39; ) &amp;&amp;     \</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">     ( (h).magic[2]&gt;=&#39;1&#39; &amp;&amp; (h).magic[2]&lt;=&#39;9&#39; )   )    \</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="preprocessor"> ? (h).magic[2]-&#39;0&#39; : 0 )</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">/*.................*/</span></div><div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="nifti1_8h.html#a52a7c735335bcc8afa6bb6f096ce7cb7"> 1468</a></span>&#160;<span class="preprocessor">#define NIFTI_ONEFILE(h) ( (h).magic[1] == &#39;+&#39; )</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">/*.................*/</span></div><div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="nifti1_8h.html#a12e8b5fe9240bf3db30d520a5240381f"> 1474</a></span>&#160;<span class="preprocessor">#define NIFTI_NEEDS_SWAP(h) ( (h).dim[0] &lt; 0 || (h).dim[0] &gt; 7 )</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">/*.................*/</span></div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="nifti1_8h.html#ada727dd45bee2e85ce735d72e0f7daec"> 1480</a></span>&#160;<span class="preprocessor">#define NIFTI_5TH_DIM(h) ( ((h).dim[0]&gt;4 &amp;&amp; (h).dim[5]&gt;1) ? (h).dim[5] : 0 )</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment">/*****************************************************************************/</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">/*=================*/</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="preprocessor">#ifdef  __cplusplus</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;}</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">/*=================*/</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _NIFTI_HEADER_ */</span><span class="preprocessor"></span></div><div class="ttc" id="structnifti1__extension_html_ab28de104ee23ab3703a07312b45b3edc"><div class="ttname"><a href="structnifti1__extension.html#ab28de104ee23ab3703a07312b45b3edc">nifti1_extension::esize</a></div><div class="ttdeci">int esize</div><div class="ttdef"><b>Definition:</b> nifti1.h:294</div></div>
<div class="ttc" id="structnifti__1__header_html_acc037ae9773f9e79333f0927ed3a38ce"><div class="ttname"><a href="structnifti__1__header.html#acc037ae9773f9e79333f0927ed3a38ce">nifti_1_header::glmin</a></div><div class="ttdeci">int glmin</div><div class="ttdef"><b>Definition:</b> nifti1.h:180</div></div>
<div class="ttc" id="structnifti1__extender_html"><div class="ttname"><a href="structnifti1__extender.html">nifti1_extender</a></div><div class="ttdoc">This structure represents a 4-byte string that should follow the binary nifti_1_header data in a NIFT...</div><div class="ttdef"><b>Definition:</b> nifti1.h:287</div></div>
<div class="ttc" id="structnifti__1__header_html_af3b966e2936cc174b43fedadbbd933dc"><div class="ttname"><a href="structnifti__1__header.html#af3b966e2936cc174b43fedadbbd933dc">nifti_1_header::pixdim</a></div><div class="ttdeci">float pixdim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:168</div></div>
<div class="ttc" id="structnifti__1__header_html_a1011d5320abdedcb710552cae92f86db"><div class="ttname"><a href="structnifti__1__header.html#a1011d5320abdedcb710552cae92f86db">nifti_1_header::session_error</a></div><div class="ttdeci">short session_error</div><div class="ttdef"><b>Definition:</b> nifti1.h:152</div></div>
<div class="ttc" id="structnifti__1__header_html_a0e0cf033d74cfae329b4ce0d1b7ece8e"><div class="ttname"><a href="structnifti__1__header.html#a0e0cf033d74cfae329b4ce0d1b7ece8e">nifti_1_header::db_name</a></div><div class="ttdeci">char db_name[18]</div><div class="ttdef"><b>Definition:</b> nifti1.h:150</div></div>
<div class="ttc" id="structnifti__1__header_html_abd0c6bb6b71a2a6d10fbcb516af52b13"><div class="ttname"><a href="structnifti__1__header.html#abd0c6bb6b71a2a6d10fbcb516af52b13">nifti_1_header::dim</a></div><div class="ttdeci">short dim[8]</div><div class="ttdef"><b>Definition:</b> nifti1.h:157</div></div>
<div class="ttc" id="structnifti__1__header_html_a4442d6183e4dce5af7e71365d3eed1ec"><div class="ttname"><a href="structnifti__1__header.html#a4442d6183e4dce5af7e71365d3eed1ec">nifti_1_header::data_type</a></div><div class="ttdeci">char data_type[10]</div><div class="ttdef"><b>Definition:</b> nifti1.h:149</div></div>
<div class="ttc" id="structnifti__1__header_html_a07e91b15b45a914b71ff41f93fe64e56"><div class="ttname"><a href="structnifti__1__header.html#a07e91b15b45a914b71ff41f93fe64e56">nifti_1_header::glmax</a></div><div class="ttdeci">int glmax</div><div class="ttdef"><b>Definition:</b> nifti1.h:179</div></div>
<div class="ttc" id="structnifti__1__header_html_aca24a8965851296a63d13da6c7cc3456"><div class="ttname"><a href="structnifti__1__header.html#aca24a8965851296a63d13da6c7cc3456">nifti_1_header::scl_inter</a></div><div class="ttdeci">float scl_inter</div><div class="ttdef"><b>Definition:</b> nifti1.h:171</div></div>
<div class="ttc" id="structnifti__1__header_html_a93e288bd39c44188304677f6bdc96a6b"><div class="ttname"><a href="structnifti__1__header.html#a93e288bd39c44188304677f6bdc96a6b">nifti_1_header::aux_file</a></div><div class="ttdeci">char aux_file[24]</div><div class="ttdef"><b>Definition:</b> nifti1.h:184</div></div>
<div class="ttc" id="structnifti__1__header_html_af1d99efbd3af0180f9335cbb1b822248"><div class="ttname"><a href="structnifti__1__header.html#af1d99efbd3af0180f9335cbb1b822248">nifti_1_header::sizeof_hdr</a></div><div class="ttdeci">int sizeof_hdr</div><div class="ttdef"><b>Definition:</b> nifti1.h:148</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c7eff0d659a6a1f69f576d40cf4d3ed"><div class="ttname"><a href="structnifti__1__header.html#a5c7eff0d659a6a1f69f576d40cf4d3ed">nifti_1_header::magic</a></div><div class="ttdeci">char magic[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:202</div></div>
<div class="ttc" id="structnifti__1__header_html"><div class="ttname"><a href="structnifti__1__header.html">nifti_1_header</a></div><div class="ttdoc">Data structure defining the fields in the nifti1 header. This binary header should be found at the be...</div><div class="ttdef"><b>Definition:</b> nifti1.h:144</div></div>
<div class="ttc" id="structnifti__1__header_html_a8725b5f9e0ef6882200bfeb89b11eb3a"><div class="ttname"><a href="structnifti__1__header.html#a8725b5f9e0ef6882200bfeb89b11eb3a">nifti_1_header::descrip</a></div><div class="ttdeci">char descrip[80]</div><div class="ttdef"><b>Definition:</b> nifti1.h:183</div></div>
<div class="ttc" id="structnifti__1__header_html_a6fbfa89133238e59e6220e0b778c93ef"><div class="ttname"><a href="structnifti__1__header.html#a6fbfa89133238e59e6220e0b778c93ef">nifti_1_header::qoffset_x</a></div><div class="ttdeci">float qoffset_x</div><div class="ttdef"><b>Definition:</b> nifti1.h:192</div></div>
<div class="ttc" id="structnifti__1__header_html_a5cfb257cbd7a4b7dde2350877cd126c5"><div class="ttname"><a href="structnifti__1__header.html#a5cfb257cbd7a4b7dde2350877cd126c5">nifti_1_header::qoffset_y</a></div><div class="ttdeci">float qoffset_y</div><div class="ttdef"><b>Definition:</b> nifti1.h:193</div></div>
<div class="ttc" id="structnifti__1__header_html_a60fc36ed5afd638fd7da425ad7ecae94"><div class="ttname"><a href="structnifti__1__header.html#a60fc36ed5afd638fd7da425ad7ecae94">nifti_1_header::bitpix</a></div><div class="ttdeci">short bitpix</div><div class="ttdef"><b>Definition:</b> nifti1.h:166</div></div>
<div class="ttc" id="structnifti__1__header_html_a7d3eb58a5415d9c65f3df444ac94fc74"><div class="ttname"><a href="structnifti__1__header.html#a7d3eb58a5415d9c65f3df444ac94fc74">nifti_1_header::dim_info</a></div><div class="ttdeci">char dim_info</div><div class="ttdef"><b>Definition:</b> nifti1.h:154</div></div>
<div class="ttc" id="structnifti__1__header_html_a3ade0b01649a3d990ee1dfdef8c452c4"><div class="ttname"><a href="structnifti__1__header.html#a3ade0b01649a3d990ee1dfdef8c452c4">nifti_1_header::quatern_c</a></div><div class="ttdeci">float quatern_c</div><div class="ttdef"><b>Definition:</b> nifti1.h:190</div></div>
<div class="ttc" id="structnifti__1__header_html_ad88e17b7ec9a5e198bf13d82e167e643"><div class="ttname"><a href="structnifti__1__header.html#ad88e17b7ec9a5e198bf13d82e167e643">nifti_1_header::srow_x</a></div><div class="ttdeci">float srow_x[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:196</div></div>
<div class="ttc" id="structnifti__1__header_html_a48d14671528f3dfe0593320006877a8a"><div class="ttname"><a href="structnifti__1__header.html#a48d14671528f3dfe0593320006877a8a">nifti_1_header::sform_code</a></div><div class="ttdeci">short sform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:187</div></div>
<div class="ttc" id="structnifti__1__header_html_acd9cfc4f9d1117a803c4a619132583d7"><div class="ttname"><a href="structnifti__1__header.html#acd9cfc4f9d1117a803c4a619132583d7">nifti_1_header::regular</a></div><div class="ttdeci">char regular</div><div class="ttdef"><b>Definition:</b> nifti1.h:153</div></div>
<div class="ttc" id="structnifti__1__header_html_a600fb5b0c533454bbbc61b2e0696c9a8"><div class="ttname"><a href="structnifti__1__header.html#a600fb5b0c533454bbbc61b2e0696c9a8">nifti_1_header::cal_min</a></div><div class="ttdeci">float cal_min</div><div class="ttdef"><b>Definition:</b> nifti1.h:176</div></div>
<div class="ttc" id="structnifti__1__header_html_ad5f8888fcc5fde14d3e387653721e270"><div class="ttname"><a href="structnifti__1__header.html#ad5f8888fcc5fde14d3e387653721e270">nifti_1_header::datatype</a></div><div class="ttdeci">short datatype</div><div class="ttdef"><b>Definition:</b> nifti1.h:165</div></div>
<div class="ttc" id="structnifti__1__header_html_aa1eeee8a4cd325b413c5d368ec8fc534"><div class="ttname"><a href="structnifti__1__header.html#aa1eeee8a4cd325b413c5d368ec8fc534">nifti_1_header::intent_p3</a></div><div class="ttdeci">float intent_p3</div><div class="ttdef"><b>Definition:</b> nifti1.h:162</div></div>
<div class="ttc" id="structnifti__1__header_html_a017e9d430b66386e569c6b9cd11059ed"><div class="ttname"><a href="structnifti__1__header.html#a017e9d430b66386e569c6b9cd11059ed">nifti_1_header::intent_code</a></div><div class="ttdeci">short intent_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:164</div></div>
<div class="ttc" id="structnifti__1__header_html_a6b95dab630916801b716f52513305e93"><div class="ttname"><a href="structnifti__1__header.html#a6b95dab630916801b716f52513305e93">nifti_1_header::xyzt_units</a></div><div class="ttdeci">char xyzt_units</div><div class="ttdef"><b>Definition:</b> nifti1.h:174</div></div>
<div class="ttc" id="structnifti__1__header_html_aa3a09932cda88dd765a438c9b9c46503"><div class="ttname"><a href="structnifti__1__header.html#aa3a09932cda88dd765a438c9b9c46503">nifti_1_header::vox_offset</a></div><div class="ttdeci">float vox_offset</div><div class="ttdef"><b>Definition:</b> nifti1.h:169</div></div>
<div class="ttc" id="structnifti__1__header_html_a530588bf405af52255dc064a6f451c71"><div class="ttname"><a href="structnifti__1__header.html#a530588bf405af52255dc064a6f451c71">nifti_1_header::quatern_b</a></div><div class="ttdeci">float quatern_b</div><div class="ttdef"><b>Definition:</b> nifti1.h:189</div></div>
<div class="ttc" id="structnifti__1__header_html_a95ae85e5e0bba57c4b3cbd8a0b32168b"><div class="ttname"><a href="structnifti__1__header.html#a95ae85e5e0bba57c4b3cbd8a0b32168b">nifti_1_header::qform_code</a></div><div class="ttdeci">short qform_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:186</div></div>
<div class="ttc" id="structnifti1__extension_html_a598c33c1b45d45c22645d40762803ceb"><div class="ttname"><a href="structnifti1__extension.html#a598c33c1b45d45c22645d40762803ceb">nifti1_extension::edata</a></div><div class="ttdeci">char * edata</div><div class="ttdef"><b>Definition:</b> nifti1.h:296</div></div>
<div class="ttc" id="structnifti__1__header_html_ab39ee04eb345e95dd4e5183e0f84c02b"><div class="ttname"><a href="structnifti__1__header.html#ab39ee04eb345e95dd4e5183e0f84c02b">nifti_1_header::intent_p2</a></div><div class="ttdeci">float intent_p2</div><div class="ttdef"><b>Definition:</b> nifti1.h:160</div></div>
<div class="ttc" id="structnifti__1__header_html_a5c875c40271c15601b3389450fba85b3"><div class="ttname"><a href="structnifti__1__header.html#a5c875c40271c15601b3389450fba85b3">nifti_1_header::intent_p1</a></div><div class="ttdeci">float intent_p1</div><div class="ttdef"><b>Definition:</b> nifti1.h:158</div></div>
<div class="ttc" id="structnifti1__extension_html_ab2fd473ee53f5e91706e8a9f03be7ad7"><div class="ttname"><a href="structnifti1__extension.html#ab2fd473ee53f5e91706e8a9f03be7ad7">nifti1_extension::ecode</a></div><div class="ttdeci">int ecode</div><div class="ttdef"><b>Definition:</b> nifti1.h:295</div></div>
<div class="ttc" id="structnifti__1__header_html_a07b0ec3e66e4dd72db3f0910cfab4c46"><div class="ttname"><a href="structnifti__1__header.html#a07b0ec3e66e4dd72db3f0910cfab4c46">nifti_1_header::srow_y</a></div><div class="ttdeci">float srow_y[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:197</div></div>
<div class="ttc" id="structnifti__1__header_html_ab37ea6af93cab84f95d97ee4fdbc3f4d"><div class="ttname"><a href="structnifti__1__header.html#ab37ea6af93cab84f95d97ee4fdbc3f4d">nifti_1_header::extents</a></div><div class="ttdeci">int extents</div><div class="ttdef"><b>Definition:</b> nifti1.h:151</div></div>
<div class="ttc" id="structnifti__1__header_html_af415db2201f47d61354766245c3f2520"><div class="ttname"><a href="structnifti__1__header.html#af415db2201f47d61354766245c3f2520">nifti_1_header::cal_max</a></div><div class="ttdeci">float cal_max</div><div class="ttdef"><b>Definition:</b> nifti1.h:175</div></div>
<div class="ttc" id="structnifti__1__header_html_adc0e937b2b556da163772b20da729778"><div class="ttname"><a href="structnifti__1__header.html#adc0e937b2b556da163772b20da729778">nifti_1_header::slice_start</a></div><div class="ttdeci">short slice_start</div><div class="ttdef"><b>Definition:</b> nifti1.h:167</div></div>
<div class="ttc" id="structnifti__1__header_html_a45a97dd330a77ab680ef91c47a761c29"><div class="ttname"><a href="structnifti__1__header.html#a45a97dd330a77ab680ef91c47a761c29">nifti_1_header::scl_slope</a></div><div class="ttdeci">float scl_slope</div><div class="ttdef"><b>Definition:</b> nifti1.h:170</div></div>
<div class="ttc" id="structnifti__1__header_html_aea26ff366fcf2fdde19efd4e4f5b9d98"><div class="ttname"><a href="structnifti__1__header.html#aea26ff366fcf2fdde19efd4e4f5b9d98">nifti_1_header::srow_z</a></div><div class="ttdeci">float srow_z[4]</div><div class="ttdef"><b>Definition:</b> nifti1.h:198</div></div>
<div class="ttc" id="structnifti__1__header_html_af47d0d4ae23f57441edcef9594fd1495"><div class="ttname"><a href="structnifti__1__header.html#af47d0d4ae23f57441edcef9594fd1495">nifti_1_header::quatern_d</a></div><div class="ttdeci">float quatern_d</div><div class="ttdef"><b>Definition:</b> nifti1.h:191</div></div>
<div class="ttc" id="structnifti__1__header_html_a0d2b669f776a2b7fb84807ea2f7b4231"><div class="ttname"><a href="structnifti__1__header.html#a0d2b669f776a2b7fb84807ea2f7b4231">nifti_1_header::toffset</a></div><div class="ttdeci">float toffset</div><div class="ttdef"><b>Definition:</b> nifti1.h:178</div></div>
<div class="ttc" id="structnifti__1__header_html_a962002307f10b359788cea98ebcb40b6"><div class="ttname"><a href="structnifti__1__header.html#a962002307f10b359788cea98ebcb40b6">nifti_1_header::qoffset_z</a></div><div class="ttdeci">float qoffset_z</div><div class="ttdef"><b>Definition:</b> nifti1.h:194</div></div>
<div class="ttc" id="structnifti__1__header_html_a260d55840377fe1bcfb49bda5f85b76c"><div class="ttname"><a href="structnifti__1__header.html#a260d55840377fe1bcfb49bda5f85b76c">nifti_1_header::slice_end</a></div><div class="ttdeci">short slice_end</div><div class="ttdef"><b>Definition:</b> nifti1.h:172</div></div>
<div class="ttc" id="structnifti1__extension_html"><div class="ttname"><a href="structnifti1__extension.html">nifti1_extension</a></div><div class="ttdoc">Data structure defining the fields of a header extension. </div><div class="ttdef"><b>Definition:</b> nifti1.h:293</div></div>
<div class="ttc" id="structnifti__1__header_html_a70400549d1f42d7f777915273576549b"><div class="ttname"><a href="structnifti__1__header.html#a70400549d1f42d7f777915273576549b">nifti_1_header::slice_duration</a></div><div class="ttdeci">float slice_duration</div><div class="ttdef"><b>Definition:</b> nifti1.h:177</div></div>
<div class="ttc" id="structnifti__1__header_html_af25a6170a90128800e3986b68fc79e4d"><div class="ttname"><a href="structnifti__1__header.html#af25a6170a90128800e3986b68fc79e4d">nifti_1_header::slice_code</a></div><div class="ttdeci">char slice_code</div><div class="ttdef"><b>Definition:</b> nifti1.h:173</div></div>
<div class="ttc" id="structnifti__1__header_html_ae3d911b886703c6f0976e308d83a3495"><div class="ttname"><a href="structnifti__1__header.html#ae3d911b886703c6f0976e308d83a3495">nifti_1_header::intent_name</a></div><div class="ttdeci">char intent_name[16]</div><div class="ttdef"><b>Definition:</b> nifti1.h:200</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
